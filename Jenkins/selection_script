pipeline {
    agent any

    parameters {
        choice(
            name: 'ACTION',
            choices: [
                'create-folder',
                'add-file',
                'append-text',
                'replace-text'
            ],
            description: 'Select the script to run'
        )
    }

    stages {
        stage('Checkout SCM') {
            steps {
                checkout scm
            }
        }

        stage('Run Selected Script') {
            steps {
                script {
                    echo "Selected script: ${params.ACTION}"

                    def scriptPath = "Jenkins/${params.ACTION}"

                    // Safety check
                    if (!fileExists(scriptPath)) {
                        error "Script '${scriptPath}' not found in repo"
                    }

                    // Make executable
                    sh "chmod +x ${scriptPath}"

                    // Execute
                    sh "./${scriptPath}"
                }
            }
        }
    }
}
